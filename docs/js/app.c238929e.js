(function(){var e={4600:function(e,t,n){"use strict";var a=n(9242),s=n(3396),i=n(7139);const r=(0,s.Uk)("Mint"),o=(0,s.Uk)(" | "),l=(0,s.Uk)("My NFTs"),d=(0,s.Uk)(" | "),u=(0,s.Uk)("Explore Collection"),c=(0,s.Uk)(" | "),p=(0,s.Uk)("Staking and Leveling Info"),h=(0,s.Uk)(" | "),y={key:0,class:"card mb-4"},f={class:"col-xxl-12 col-xl-12 col-lg-12 col-md-12 col-sm-12"},m={class:"card-body"},g=["href"],k=["href"],w=(0,s._)("img",{src:"images/metamask-icon-32.png"},null,-1),b=(0,s.Uk)("Add Surviville Coin (SVC) to Metamask"),v=[w,b],T={key:1};function _(e,t,n,a,w,b){const _=(0,s.up)("router-link"),M=(0,s.up)("router-view");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("nav",null,[(0,s.Wm)(_,{to:"/"},{default:(0,s.w5)((()=>[r])),_:1}),o,(0,s.Wm)(_,{to:"/my-reapers"},{default:(0,s.w5)((()=>[l])),_:1}),d,(0,s.Wm)(_,{to:"/all-reapers"},{default:(0,s.w5)((()=>[u])),_:1}),c,(0,s.Wm)(_,{to:"/info"},{default:(0,s.w5)((()=>[p])),_:1}),h,null!==w.myAddressDisplay?((0,s.wg)(),(0,s.iD)("a",{key:0,onClick:t[0]||(t[0]=e=>w.expandWalletAddress=!w.expandWalletAddress)},(0,i.zw)(w.myAddressDisplay),1)):((0,s.wg)(),(0,s.iD)("a",{key:1,onClick:t[1]||(t[1]=e=>b.loginMM())},"Login"))]),w.expandWalletAddress?((0,s.wg)(),(0,s.iD)("div",y,[(0,s._)("div",f,[(0,s._)("div",m,[(0,s._)("a",{class:"dropdown-item",onClick:t[2]||(t[2]=e=>w.expandWalletAddress=!1),href:"https://oasis.cash/collection/"+w.reaperAddress,target:"_blank"}," Buy or Sell Reaperville NFTs on Oasis ",8,g),(0,s._)("a",{class:"dropdown-item",onClick:t[3]||(t[3]=e=>w.expandWalletAddress=!1),href:"https://www.smartscan.cash/address/"+w.reaperAddress,target:"_blank"}," Inspect Reaperville Contract Activity ",8,k),(0,s._)("span",{onClick:t[4]||(t[4]=e=>{b.addRewardTokenToMM,w.expandWalletAddress=!1}),class:"btn btn-outline-secondary btn-sm"},v)])])])):(0,s.kq)("",!0),w.wrongNetwork?((0,s.wg)(),(0,s.iD)("h2",T,[(0,s._)("strong",null,"Please switch the network to "+(0,i.zw)(w.netName)+".",1)])):(0,s.kq)("",!0),(0,s.Wm)(M)],64)}var M=n(6482),x=n(2956),P={data(){return{myAddressDisplay:null,expandWalletAddress:!1,reaperAddress:window.ReaperAddress,netName:window.netName,wrongNetwork:!1}},mounted:function(){this.provider=new x.Q(window.ethereum,"any"),this.provider.getNetwork().then((e=>{e.chainId!==window.netId&&(this.wrongNetwork=!0,window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:M.Dv(window.netId)}]}).catch((e=>{4902===e.code&&window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainName:window.netName,chainId:M.Dv(window.netId),nativeCurrency:{name:"BCH",decimals:18,symbol:"BCH"},rpcUrls:[window.rpcServer],blockExplorerUrls:["https://smartscan.cash/"]}]})})))})),this.provider.on("network",((e,t)=>{t&&window.location.reload()})),this.signer=this.provider.getSigner(),this.signer.getAddress().then((e=>{this.myAddressDisplay=e.substring(0,5)+"..."+e.substring(e.length-5,e.length)}))},methods:{loginMM:function(){window.location.reload()},addRewardTokenToMM:function(){window.ethereum.request({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:window.RewardTokenAddress,symbol:"SVC",decimals:18}}})}}},C=n(89);const N=(0,C.Z)(P,[["render",_]]);var S=N;const A={class:"content-body"},I={class:"container"},U={class:"row"},F={class:"col-xxl-12"},R=(0,s._)("h2",{class:"mb-0"},"Reaperville Staking Statistics",-1),B=(0,s._)("p",null," Earnable reward tokens: 5 million in total for Reaperville collection, 1 million in first year, 2.5 million in first 3 years ",-1),L=(0,s._)("p",null,"SVC Total max. supply: 210 million",-1),D=(0,s._)("h1",{class:"mb-0"},"â€”Everything below this line is ADMIN ONLYâ€”",-1),H={key:0},z={key:1},E=(0,s._)("h2",null,"Mint Reward Tokens",-1),O=(0,s.Uk)(" Â  "),V=(0,s._)("h2",{class:"mb-0"},"Register Reaper Contract as Token Minter",-1),Y=(0,s.Uk)(" Reaperville is minter: "),W=["disabled"],q=(0,s.Uk)(" Â  "),j=["disabled"],X=(0,s._)("br",null,null,-1),Z=(0,s._)("h4",null,"Reaper Contract Balances",-1),Q=["disabled"],K=(0,s._)("br",null,null,-1),$=(0,s._)("h4",null,"Reaper Mint Price",-1),J=(0,s._)("br",null,null,-1),G=(0,s._)("h2",{class:"mb-0"},"Pause Reaper Mint",-1),ee=["disabled"],te=(0,s.Uk)(" Â  "),ne=["disabled"],ae=(0,s._)("h2",{class:"mb-0"},"Pause Reaper Staking",-1),se=["disabled"],ie=(0,s.Uk)(" Â  "),re=["disabled"];function oe(e,t,n,r,o,l){return(0,s.wg)(),(0,s.iD)("div",A,[(0,s._)("div",I,[(0,s._)("div",U,[(0,s._)("div",F,[(0,s._)("div",null,[R,B,L,(0,s._)("p",null,"Total staked power: "+(0,i.zw)(o.totalStakedPower),1),(0,s._)("p",null,"Base staking power: "+(0,i.zw)(o.baseStakingPower),1),(0,s._)("p",null,"Total emission rate: "+(0,i.zw)(o.svcEmissionPerHour)+" SVC / hour",1),(0,s._)("p",null," = "+(0,i.zw)(Math.round(24*o.svcEmissionPerHour*365/1e3)/1e3)+" million SVC / year ",1),D,o.isAdmin?((0,s.wg)(),(0,s.iD)("h2",z,"(YOU ARE THE ADMIN)")):((0,s.wg)(),(0,s.iD)("h2",H,"(You are not logged into the admin wallet)")),E,(0,s.wy)((0,s._)("input",{id:"tokensToMint",type:"number",min:"10",class:"form-control mx-auto","onUpdate:modelValue":t[0]||(t[0]=e=>o.rewardTokensToMint=e)},null,512),[[a.nr,o.rewardTokensToMint]]),(0,s.wy)((0,s._)("input",{id:"addressTo",type:"text",class:"form-control mx-auto","onUpdate:modelValue":t[1]||(t[1]=e=>o.addressTo=e)},null,512),[[a.nr,o.addressTo]]),(0,s._)("button",{class:"btn btn-danger",onClick:t[2]||(t[2]=e=>l.registerAddressAsMinter(o.addressTo))}," Register "+(0,i.zw)(o.addressTo)+" as minter ",1),O,(0,s._)("button",{class:"btn btn-primary",onClick:t[3]||(t[3]=e=>l.mintRewardToken(o.addressTo,o.rewardTokensToMint))}," Mint "+(0,i.zw)(o.rewardTokensToMint),1),(0,s._)("h6",null,(0,i.zw)(o.feedbackMessage),1),V,(0,s._)("div",null,[Y,(0,s._)("strong",null,(0,i.zw)(o.reaperIsSvcMinter),1)]),(0,s._)("div",null,[(0,s._)("button",{class:"btn btn-danger",type:"button",disabled:!o.reaperIsSvcMinter,onClick:t[4]||(t[4]=(...e)=>l.unregisterReaperAsMinter&&l.unregisterReaperAsMinter(...e))}," Unregister as minter ",8,W),q,(0,s._)("button",{class:"btn btn-success",type:"button",disabled:o.reaperIsSvcMinter,onClick:t[5]||(t[5]=(...e)=>l.registerReaperAsMinter&&l.registerReaperAsMinter(...e))}," Register as minter ",8,j)]),X,Z,(0,s._)("p",null,(0,i.zw)(Math.round(o.reaperBchBalance/10**15)/1e3)+" BCH ",1),(0,s._)("div",null,[(0,s._)("button",{class:"btn btn-primary",type:"button",disabled:o.reaperBchBalance<=0,onClick:t[6]||(t[6]=(...e)=>l.withdrawBchFromReaper&&l.withdrawBchFromReaper(...e))}," withdraw BCH ",8,Q)]),K,$,(0,s._)("p",null,(0,i.zw)(Math.round(o.reaperBchPerNft/10**12)/10**6)+" BCH ",1),(0,s.wy)((0,s._)("input",{id:"reaperBchPerNft",type:"number",min:"10",class:"form-control mx-auto","onUpdate:modelValue":t[7]||(t[7]=e=>o.reaperBchPerNft=e)},null,512),[[a.nr,o.reaperBchPerNft]]),(0,s._)("div",null,[(0,s._)("button",{class:"btn btn-primary",type:"button",onClick:t[8]||(t[8]=(...e)=>l.setReaperBchPerNft&&l.setReaperBchPerNft(...e))}," set new price "+(0,i.zw)(Math.round(o.reaperBchPerNft/10**12)/10**6)+" BCH ",1)]),J,G,(0,s.Uk)(" Mint is active: "+(0,i.zw)(!o.reaperMintPaused)+" ",1),(0,s._)("p",null,[(0,s._)("button",{onClick:t[9]||(t[9]=e=>l.setReaperMintPaused(!0)),disabled:o.reaperMintPaused,class:"btn btn-danger"}," Pause ",8,ee),te,(0,s._)("button",{onClick:t[10]||(t[10]=e=>l.setReaperMintPaused(!1)),disabled:!o.reaperMintPaused,class:"btn btn-success"}," Unpause ",8,ne)]),ae,(0,s.Uk)(" Staking is active: "+(0,i.zw)(!o.reaperStakingPaused)+" ",1),(0,s._)("p",null,[(0,s._)("button",{onClick:t[11]||(t[11]=e=>l.setReaperStakingPaused(!0)),disabled:o.reaperStakingPaused,class:"btn btn-danger"}," Pause ",8,se),ie,(0,s._)("button",{onClick:t[12]||(t[12]=e=>l.setReaperStakingPaused(!1)),disabled:!o.reaperStakingPaused,class:"btn btn-success"}," Unpause ",8,re)])])])])])])}var le=n(6796),de=n(7647),ue=JSON.parse('{"Mt":[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[],"name":"MAX_SUPPLY","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"burn","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"burnFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"subtractedValue","type":"uint256"}],"name":"decreaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"addedValue","type":"uint256"}],"name":"increaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_to","type":"address"},{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"mint","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_addressToCheck","type":"address"}],"name":"remainingMintersAllowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_addressToRemove","type":"address"}],"name":"removeMinter","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_addressToAdd","type":"address"},{"internalType":"uint256","name":"_newAllowance","type":"uint256"}],"name":"updateMintersAllowance","outputs":[],"stateMutability":"nonpayable","type":"function"}]}'),ce=JSON.parse('{"Mt":[{"inputs":[{"internalType":"contract RewardToken","name":"_rewardToken","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"approved","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"uint32","name":"_newBaseStakingPower","type":"uint32"}],"name":"adjustBaseStakingPower","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"approve","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"baseExtension","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"baseURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"bchPerNft","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"costPerLevel","outputs":[{"internalType":"uint16","name":"","type":"uint16"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint16[]","name":"tokenIdArr","type":"uint16[]"}],"name":"emergencyUnstake","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getApproved","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint16","name":"_tokenId","type":"uint16"}],"name":"getLevelView","outputs":[{"internalType":"uint8","name":"level","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"harvest","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"isMintPausedStakingPaused","outputs":[{"internalType":"bool[2]","name":"","type":"bool[2]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint16","name":"_startId","type":"uint16"},{"internalType":"uint16","name":"_endId","type":"uint16"}],"name":"levelsForTokenIds","outputs":[{"internalType":"uint16[]","name":"","type":"uint16[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint8","name":"_mintAmount","type":"uint8"}],"name":"mint","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint8","name":"_mintAmount","type":"uint8"},{"internalType":"address","name":"_receiver","type":"address"}],"name":"mintForAddress","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ownerOf","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"royaltiesPctX100","outputs":[{"internalType":"uint16","name":"","type":"uint16"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"royaltiesReceiver","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_tokenId","type":"uint256"},{"internalType":"uint256","name":"_salePrice","type":"uint256"}],"name":"royaltyInfo","outputs":[{"internalType":"address","name":"receiver","type":"address"},{"internalType":"uint256","name":"royaltyAmount","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"_newBaseURI","type":"string"}],"name":"setBaseURI","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_newBchPerNft","type":"uint256"}],"name":"setBchPerNft","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint16","name":"_newCostPerLevel","type":"uint16"}],"name":"setCostPerLevel","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool","name":"_newPaused","type":"bool"}],"name":"setMintPaused","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint16","name":"_newRoyaltiesPctX100","type":"uint16"}],"name":"setRoyaltiesPercentageTimesHundred","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newRoyaltiesReceiver","type":"address"}],"name":"setRoyaltiesReceiver","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool","name":"_newPaused","type":"bool"}],"name":"setStakingPaused","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"staker","type":"address"}],"name":"showStakerInfo","outputs":[{"internalType":"uint256[5]","name":"stkd4Scnds_stkrPwr_ttlPwr_basePwr_lastIdx_emmPh","type":"uint256[5]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_staker","type":"address"}],"name":"showStakersEarningsAfterLastTimestamp","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_staker","type":"address"}],"name":"showStakersEarningsUntilLastTimestamp","outputs":[{"internalType":"uint256","name":"earned","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint16[]","name":"tokenIdArr","type":"uint16[]"}],"name":"stake","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"index","type":"uint256"}],"name":"tokenByIndex","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint256","name":"index","type":"uint256"}],"name":"tokenOfOwnerByIndex","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"tokenURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"transferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint16[]","name":"tokenIdArr","type":"uint16[]"}],"name":"unstake","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint16[]","name":"tokenIdArr","type":"uint16[]"},{"internalType":"uint8[]","name":"levelIncArr","type":"uint8[]"}],"name":"upgradeLevel","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_owner","type":"address"}],"name":"walletOfOwner","outputs":[{"internalType":"uint16[]","name":"","type":"uint16[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_owner","type":"address"},{"internalType":"uint16","name":"_maxNftsToReturn","type":"uint16"},{"internalType":"uint16","name":"_slice","type":"uint16"}],"name":"walletOfOwnerWithLevels","outputs":[{"internalType":"uint16[]","name":"","type":"uint16[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"withdraw","outputs":[],"stateMutability":"nonpayable","type":"function"}]}'),pe={name:"App",components:{},data(){return{rewardTokenContract:null,reaperContract:null,reaperBchBalance:0,reaperBchPerNft:0,rewardTokensToMint:1e4,addressTo:"",feedbackMessage:"",reaperIsSvcMinter:!1,isAdmin:!1,reaperMintPaused:!1,reaperStakingPaused:!1,allowanceToSet:5e6,totalStakedPower:null,baseStakingPower:null,released:null,svcEmissionPerHour:null}},methods:{mintRewardToken:async function(e,t){let n=await this.rewardTokenContract.mint(e,de.vz(t.toString(),"ether"));await n.wait()},registerAddressAsMinter:async function(e){this.feedbackMessage="";let t=await this.rewardTokenContract.remainingMintersAllowance(e);if(t>0)return this.feedbackMessage=e+" is already registered as minter",!1;let n="5000000000000000000000000",a=await this.rewardTokenContract.updateMintersAllowance(e,n);await a.wait(),window.location.reload()},registerReaperAsMinter:async function(){let e="5000000000000000000000000",t=await this.rewardTokenContract.updateMintersAllowance(window.ReaperAddress,e);await t.wait(),window.location.reload()},unregisterReaperAsMinter:async function(){let e=await this.rewardTokenContract.removeMinter(window.ReaperAddress);await e.wait(),window.location.reload()},setReaperMintPaused:async function(e){let t=await this.reaperContract.setMintPaused(e);await t.wait(),window.location.reload()},setReaperStakingPaused:async function(e){let t=await this.reaperContract.setStakingPaused(e);await t.wait(),window.location.reload()},setReaperBchPerNft:async function(){let e=await this.reaperContract.setBchPerNft(this.reaperBchPerNft);await e.wait(),window.location.reload()},withdrawBchFromReaper:async function(){let e=await this.reaperContract.withdraw();await e.wait(),window.location.reload()}},mounted:function(){this.provider=new x.Q(window.ethereum,"any"),this.provider.send("eth_requestAccounts",[]).then((()=>{this.signer=this.provider.getSigner();let e=new le.CH(window.RewardTokenAddress,ue.Mt,this.provider.getSigner()),t=new le.CH(window.ReaperAddress,ce.Mt,this.provider.getSigner());this.rewardTokenContract=e,this.reaperContract=t})).then((()=>{this.signer.getAddress().then((e=>{this.addressTo=e,e===window.DevAddress&&(this.isAdmin=!0)})),this.reaperContract.showStakerInfo(window.DevAddress).then((e=>{this.totalStakedPower=e[2],this.baseStakingPower=e[3],this.svcEmissionPerHour=Math.round(1e5*de.dF(e[4]))/1e5})),this.provider.getBalance(window.ReaperAddress).then((e=>{this.reaperBchBalance=e})),this.reaperContract.isMintPausedStakingPaused().then((e=>{this.reaperMintPaused=e[0],this.reaperStakingPaused=e[1]})),this.reaperContract.bchPerNft().then((e=>{this.reaperBchPerNft=e})),this.rewardTokenContract.remainingMintersAllowance(window.ReaperAddress).then((e=>{this.reaperIsSvcMinter=e>0}))}))}};const he=(0,C.Z)(pe,[["render",oe]]);var ye=he;const fe={class:"text-center container col-lg-8 col-md-9 col-sm-10 mx-auto mt-2 mb-4"},me=(0,s.uE)('<h1>The Reaperville NFT Collection</h1><h4 class="text-muted"> This collection of colorful reapers is the first NFT collection of the Surviville project. <a target="_blank" href="https://ville.cash/">Learn more about Surviville.</a></h4><div class="col-xxl-4 mx-auto mt-4 mb-4"><img src="/images/avatar/preview.gif" class="img-fluid rounded" alt="Reaperville NFTs Preview"></div><h4 class="text-muted"> After minting some Reaperville NFTs, you can stake them <a href="/my-reapers">here</a> to earn a passive income stream of Surviville coins. These coins can be used to permanently upgrade the level of your NFTs in order to increase their staking power. </h4><h4 class="text-muted"> In the future, more use cases will follow â€” such as giving your NFTs custom names and participating in winning opportunities. </h4><br>',6),ge=(0,s._)("h4",{class:"lead text-muted mx-auto my-3"},[(0,s._)("span",null,"You can mint up to 40 NFTs per transaction. "),(0,s._)("span",null,"The NFTs are minted in a non-sequential, randomised order.")],-1),ke={class:"mx-auto my-4"},we=(0,s._)("h4",{class:"lead text-muted mx-auto my-3"},[(0,s._)("span",null,"Please select how many Reaperville NFTs you want to mint.")],-1),be={class:"mb-3 mx-auto"},ve={class:"input-group mx-auto"},Te={class:"input-group-prepend mx-auto"},_e=(0,s.Uk)(" Â  "),Me=(0,s.Uk)(" Â  "),xe=(0,s.Uk)(" Â  "),Pe=(0,s.Uk)(" Â  "),Ce=(0,s.Uk)(" Â  "),Ne=(0,s.Uk)(" Â  "),Se=(0,s.Uk)(" Â  "),Ae={class:"mb-3 mx-auto"},Ie={class:"input-group mx-auto"},Ue={class:"input-group-prepend mx-auto"},Fe=["disabled"],Re={class:"col-lg-8 col-md-8 col-sm-8 mx-auto"},Be=["max"],Le=["disabled"],De={class:"row-lg-12"},He={class:"column"},ze={key:0},Ee={key:1},Oe={class:"col-lg-6 col-md-8 mx-auto"},Ve=["disabled"],Ye={key:1,class:"mt-4"},We=(0,s.Uk)(" All Reaperville NFTs have been minted. Visit "),qe=["href"],je=(0,s.Uk)(" to check if there are some for sale! "),Xe=(0,s._)("br",null,null,-1),Ze={class:"mt-4"},Qe=(0,s._)("br",null,null,-1),Ke={class:"row"},$e={class:"text-monospace col-lg-12 col-md-12 mx-auto mt-4 mb-2"},Je={key:2,class:"row"},Ge=(0,s._)("h4",{class:"text-monospace col-lg-12 col-md-12 mx-auto mt-1 mb-4"}," Please wait for the transaction to finish! ",-1),et=[Ge],tt=(0,s._)("br",null,null,-1),nt={class:"text-muted mt-2"},at=(0,s._)("h6",{class:"mx-auto text-muted"},[(0,s._)("span",null,"Note that transactions cannot be undone.")],-1);function st(e,t,n,r,o,l){return(0,s.wg)(),(0,s.iD)("section",fe,[me,o.nftsMinted<o.nftsToMintTotal?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[(0,s._)("h2",null,"For "+(0,i.zw)(o.bchPerNft/10**18)+" BCH you can mint 1 NFT.",1),ge,(0,s._)("h2",ke,[(0,s._)("span",null,(0,i.zw)(o.nftsMinted)+" of "+(0,i.zw)(o.nftsToMintTotal)+" NFTs have been minted.",1)]),we,(0,s._)("div",be,[(0,s._)("div",ve,[(0,s._)("div",Te,[(0,s._)("button",{class:"btn btn-primary",type:"button",onClick:t[0]||(t[0]=e=>o.nftsToMint=1)}," 1 "),_e,(0,s._)("button",{class:"btn btn-primary",type:"button",onClick:t[1]||(t[1]=e=>o.nftsToMint=5)}," 5 "),Me,(0,s._)("button",{class:"btn btn-primary",type:"button",onClick:t[2]||(t[2]=e=>o.nftsToMint=10)}," 10 "),xe,(0,s._)("button",{class:"btn btn-primary",type:"button",onClick:t[3]||(t[3]=e=>o.nftsToMint=15)}," 15 "),Pe,(0,s._)("button",{class:"btn btn-primary",type:"button",onClick:t[4]||(t[4]=e=>o.nftsToMint=20)}," 20 "),Ce,(0,s._)("button",{class:"btn btn-primary",type:"button",onClick:t[5]||(t[5]=e=>o.nftsToMint=25)}," 25 "),Ne,(0,s._)("button",{class:"btn btn-primary",type:"button",onClick:t[6]||(t[6]=e=>o.nftsToMint=30)}," 30 "),Se,(0,s._)("button",{class:"btn btn-primary",type:"button",onClick:t[7]||(t[7]=e=>o.nftsToMint=40)}," 40 ")])])]),(0,s._)("div",Ae,[(0,s._)("div",Ie,[(0,s._)("div",Ue,[(0,s._)("button",{class:"btn-primary",disabled:o.nftsToMint<=1,onClick:t[8]||(t[8]=e=>l.changeNftsToMint(-1))}," - ",8,Fe),(0,s._)("div",Re,[(0,s.wy)((0,s._)("input",{id:"tokensToBuy",type:"number",min:"1",max:o.maxNftsPerTx,class:"form-control mx-auto",onChange:t[9]||(t[9]=e=>l.changeNftsToMint(0)),"onUpdate:modelValue":t[10]||(t[10]=e=>o.nftsToMint=e)},null,40,Be),[[a.nr,o.nftsToMint]])]),(0,s._)("button",{class:"btn-primary",disabled:o.nftsToMint>=o.maxNftsPerTx,onClick:t[11]||(t[11]=e=>l.changeNftsToMint(1))}," + ",8,Le)])])]),(0,s._)("span",De,[(0,s._)("span",He,[o.nftsToMint>1?((0,s.wg)(),(0,s.iD)("h4",ze," Mint "+(0,i.zw)(o.nftsToMint)+" Reaperville NFTs for: ",1)):((0,s.wg)(),(0,s.iD)("h4",Ee,"Mint 1 Reaperville NFT for:")),(0,s._)("div",Oe,[(0,s._)("button",{id:"buyButtonBch",type:"button",class:"btn btn-primary my-2 btn-large",disabled:o.mintPaused||o.bchPerNft<=0,onClick:t[12]||(t[12]=(...e)=>l.mintNFTsWithBCH&&l.mintNFTsWithBCH(...e))},(0,i.zw)(Math.round(o.nftsToMint*o.bchPerNft/10**12)/10**6)+" BCH ",9,Ve)])])])],64)):((0,s.wg)(),(0,s.iD)("h2",Ye,[We,(0,s._)("a",{href:"https://oasis.cash/collection/"+o.mintContractAddress,target:"_blank"},"Oasis.cash",8,qe),je])),Xe,(0,s._)("h3",Ze,[(0,s._)("span",null,"Your Balance: "+(0,i.zw)(Math.round(o.stakersBchBalance/10**15)/1e3)+" BCH ",1)]),(0,s._)("h3",null,"You hold "+(0,i.zw)(o.nftsOwned)+" Reaperville NFTs in your wallet.",1),Qe,(0,s._)("div",Ke,[(0,s._)("h4",$e,(0,i.zw)(o.feedbackMessage),1)]),o.txInProgress?((0,s.wg)(),(0,s.iD)("div",Je,et)):(0,s.kq)("",!0),tt,(0,s._)("h6",nt,[(0,s._)("span",null,"The gas limit is set to "+(0,i.zw)(o.gasLimit)+" to ensure a successful mint. Unused gas is automatically returned to your wallet. If you lower the gas limit, you risk having failed transactions. If a transaction fails, the gas fee is lost.",1)]),at])}var it=n(4469),rt={name:"App",components:{},data(){return{provider:null,signer:null,stakersAddress:"",stakersBchBalance:0,feedbackMessage:"",mintContract:null,mintContractAddress:window.ReaperAddress,mintPaused:!0,nftsToMint:10,maxNftsPerTx:40,bchPerNft:2e16,nftsMinted:0,nftsOwned:0,nftsToMintTotal:2500,txInProgress:!1,gasLimit:25e4}},methods:{getBchBalance:function(){this.provider.getBalance(this.stakersAddress).then((e=>{this.stakersBchBalance=e}))},changeNftsToMint:function(e){this.feedbackMessage="",this.nftsToMint=Math.floor(this.nftsToMint)+e,this.nftsToMint<1?this.nftsToMint=1:this.nftsToMint>this.maxNftsPerTx&&(this.nftsToMint=this.maxNftsPerTx)},mintNFTsWithBCH:async function(){await this.load();let e=this.nftsToMintTotal-this.nftsMinted;if(this.nftsToMint>e)return this.feedbackMessage=`There are only ${e} NFTs available for minting!`,this.maxNftsPerTx=e,!1;let t,n=this.bchPerNft*this.nftsToMint,a=Math.min(1e7,this.gasLimit+(this.gasLimit-25e3)*(this.nftsToMint-1));if(console.log("totalCostBchWei: ",n),console.log("Gas limit: ",a),this.stakersBchBalance<n+a)return this.feedbackMessage=`You have ${Math.round(this.stakersBchBalance/10**14)/1e4} BCH in your wallet. You can mint up to ${Math.round(this.stakersBchBalance/Number(this.bchPerNft)-.5)} NFTs with that.`,!1;this.feedbackMessage="Minting your NFTs.",this.txInProgress=!0;try{t=await this.mintContract.mint(this.nftsToMint,{value:n.toString(),gasLimit:a.toString(),gasPrice:104674e4}),console.log(t),await t.wait(),console.log(t)}catch(i){return this.feedbackMessage="An error occured. Please try again later.",this.txInProgress=!1,!1}console.log("tx hash:",t.hash);const s=await this.provider.getTransaction(t.hash);try{let e=await this.provider.call(s,s.blockNumber);console.log(e),"0x"==e&&(this.feedbackMessage="Congratulations! You successfully minted some NFTs! Visit the staking website to take a look at your NFTs.",this.txInProgress=!1)}catch(i){this.feedbackMessage="An error occured.\nPlease try again later.",this.txInProgress=!1;const e=i.data.replace("Reverted ","");console.log({err:i});let t=it.ZN("0x"+e.substr(138));console.log("revert reason:",t)}this.load()},load:async function(){this.signer.getAddress().then((e=>{this.stakersAddress=e,this.getBchBalance(),this.mintContract.balanceOf(e).then((e=>{this.nftsOwned=e}))})),this.mintContract.isMintPausedStakingPaused().then((e=>{this.mintPaused=e[0]})),this.mintContract.bchPerNft().then((e=>{this.bchPerNft=e})),this.mintContract.totalSupply().then((e=>{this.nftsMinted=e}))}},mounted:function(){this.provider=new x.Q(window.ethereum,"any"),this.provider.send("eth_requestAccounts",[]).then((()=>{this.signer=this.provider.getSigner(),this.mintContract=new le.CH(window.ReaperAddress,ce.Mt,this.provider.getSigner())})).then((()=>{this.load()}))}};const ot=(0,C.Z)(rt,[["render",st]]);var lt=ot,dt=n(2483);const ut={class:"content-body"};function ct(e,t,n,a,i,r){const o=(0,s.up)("NftTop"),l=(0,s.up)("Nft");return(0,s.wg)(),(0,s.iD)("div",ut,[(0,s.Wm)(o,{projectname:"Reaperville"}),(0,s.Wm)(l,{nftCA:i.nftContract,projectname:"Reaperville",pictureLink:"https://raw.githubusercontent.com/Surviville/Reaperville/master/png-low-res/"},null,8,["nftCA"])])}const pt={key:0,class:"text-center"},ht=(0,s._)("h5",null,"Please log into Metamask first, then refresh this website...",-1),yt=[ht],ft={key:1,class:"text-center"},mt=(0,s._)("h5",{"mt-4":""},"Loading NFTs...",-1),gt=[mt],kt={key:2,class:"col-12 text-center"},wt=(0,s._)("h5",null,"Waiting for current transaction to finish...",-1),bt=[wt],vt={class:"mt-4"},Tt={key:3,class:"col-xxl-10 col-xl-10 col-lg-10 col-md-10 col-sm-12 mx-auto"},_t={class:"card"},Mt={class:"card-body"},xt=(0,s._)("span",null,"Before you can upgrade your NFTs, you need to approve the SVC token once.",-1),Pt=(0,s._)("br",null,null,-1),Ct={key:4,class:"card"},Nt={class:"col-xxl-12 col-xl-12 col-lg-12 col-md-12 col-sm-12"},St={class:"card-body"},At={key:0},It={key:1},Ut=(0,s.Uk)(" Â  "),Ft=(0,s.Uk)(" Â  "),Rt=(0,s.Uk)(" Â  "),Bt=["disabled"],Lt=(0,s.Uk)(" Â  "),Dt=["disabled"],Ht=(0,s.Uk)(" Â  "),zt=["disabled"],Et={key:2},Ot={key:3},Vt=(0,s._)("br",null,null,-1),Yt={class:"row"},Wt={key:0,class:"text-center"},qt={class:"card items"},jt={class:"card-body"},Xt={class:"row"},Zt=["value","onClick"],Qt=(0,s.Uk)(" Â  "),Kt={class:"items-img position-relative"},$t=["src","onClick"],Jt=(0,s.Uk)(" Current: Â  "),Gt={title:"current level"},en=(0,s.Uk)(" Â  "),tn={title:"current staking power"},nn={key:0},an={key:1},sn={class:"row"},rn=["min","max","onUpdate:modelValue","onChange"],on={class:"text-muted","mx-auto":""},ln=(0,s.Uk)(" After upgrade: "),dn={key:0,title:"level after upgrade"},un={title:"power after upgrade"},cn={class:"d-flex justify-content-center mt-3"},pn=["onClick","disabled"],hn=["onClick","disabled"],yn=(0,s.Uk)(" Â  "),fn=["onClick","disabled"],mn=(0,s.Uk)("s");function gn(e,t,n,r,o,l){return(0,s.wg)(),(0,s.iD)(s.HY,null,[null===o.stakersAddress?((0,s.wg)(),(0,s.iD)("div",pt,yt)):(0,s.kq)("",!0),!0===o.loadingNfts&&null!==o.stakersAddress?((0,s.wg)(),(0,s.iD)("div",ft,gt)):(0,s.kq)("",!0),o.transactionInProgress?((0,s.wg)(),(0,s.iD)("div",kt,bt)):(0,s.kq)("",!0),(0,s._)("h4",vt,(0,i.zw)(o.feedbackMessage),1),null!==o.stakersAddress&&o.stakersTokenAllowanceForLeveling<=0?((0,s.wg)(),(0,s.iD)("div",Tt,[(0,s._)("div",_t,[(0,s._)("div",Mt,[xt,(0,s._)("button",{class:"btn btn-primary",type:"button",id:"approveRewardToken",onClick:t[0]||(t[0]=(...e)=>l.approveRewardToken&&l.approveRewardToken(...e))}," approve SVC ")])])])):(0,s.kq)("",!0),Pt,null!==o.stakersAddress?((0,s.wg)(),(0,s.iD)("div",Ct,[(0,s._)("div",Nt,[(0,s._)("div",St,[1==o.selectedNfts.length?((0,s.wg)(),(0,s.iD)("h4",At,"1 NFT selected")):((0,s.wg)(),(0,s.iD)("h4",It,(0,i.zw)(o.selectedNfts.length)+" NFTs selected",1)),(0,s._)("button",{class:"btn btn-primary",type:"button",onClick:t[1]||(t[1]=e=>o.expandFilter=!o.expandFilter)}," Filter "),Ut,(0,s._)("button",{onClick:t[2]||(t[2]=(...e)=>l.selectVisible&&l.selectVisible(...e)),class:"btn btn-success",style:{"font-size":"14px"}}," Select all "),Ft,(0,s._)("button",{onClick:t[3]||(t[3]=(...e)=>l.clearSelection&&l.clearSelection(...e)),class:"btn btn-danger",style:{"font-size":"14px"}}," Clear selection "),Rt,(0,s._)("button",{onClick:t[4]||(t[4]=e=>l.upgradeSelectedNfts()),class:"btn btn-success",disabled:o.selectedNfts.length<=0||o.stakersTokenAllowanceForLeveling<=0||o.stakersTokenBalance<=0||o.stakingPaused,style:{"font-size":"14px"}}," Upgrade "+(0,i.zw)(Math.min(o.selectedNfts.length,o.maxNftsPerTx))+" for "+(0,i.zw)(o.tokenCostToBulkUpgrade)+" SVC ",9,Bt),Lt,(0,s._)("button",{onClick:t[5]||(t[5]=(...e)=>l.stakeSelected&&l.stakeSelected(...e)),class:"btn btn-success",disabled:o.selectedNfts.length<=0||o.stakingPaused,style:{"font-size":"14px"}}," Stake "+(0,i.zw)(Math.min(o.selectedNfts.length,o.maxNftsPerTx)),9,Dt),Ht,(0,s._)("button",{onClick:t[6]||(t[6]=(...e)=>l.unstakeSelected&&l.unstakeSelected(...e)),class:"btn btn-danger",disabled:o.selectedNfts.length<=0||o.stakingPaused,style:{"font-size":"14px"}}," Unstake "+(0,i.zw)(Math.min(o.selectedNfts.length,o.maxNftsPerTx)),9,zt),o.selectedNfts.length>o.maxLevel?((0,s.wg)(),(0,s.iD)("p",Et," Note: "+(0,i.zw)(o.maxLevel)+" NFTs max staking and unstaking in 1 transaction ",1)):(0,s.kq)("",!0),o.expandFilter?((0,s.wg)(),(0,s.iD)("ul",Ot,[(0,s._)("li",null,[(0,s._)("a",{class:(0,i.C_)(["dropdown-item",null===o.filter?"current":""]),href:"#",onClick:t[7]||(t[7]=e=>l.filterNfts("all"))},"All ("+(0,i.zw)(o.stakersNfts.length)+")",3)]),(0,s._)("li",null,[(0,s._)("a",{class:(0,i.C_)(["dropdown-item","staked"===o.filter?"current":""]),href:"#",onClick:t[8]||(t[8]=e=>l.filterNfts("staked"))},"Staked ("+(0,i.zw)(o.stakedCount)+")",3)]),(0,s._)("li",null,[(0,s._)("a",{class:(0,i.C_)(["dropdown-item","unstaked"===o.filter?"current":""]),href:"#",onClick:t[9]||(t[9]=e=>l.filterNfts("unstaked"))},"Unstaked ("+(0,i.zw)(o.unstakedCount)+")",3)])])):(0,s.kq)("",!0)])]),Vt,(0,s._)("div",Yt,[!1===o.loadingNfts&&o.stakersNfts.length<=0?((0,s.wg)(),(0,s.iD)("h1",Wt,"No NFTs to display")):(0,s.kq)("",!0),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.filteredNfts,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"col-xxl-2 col-xl-3 col-lg-4 col-md-4 col-sm-6",key:e},[(0,s._)("div",qt,[(0,s._)("div",jt,[(0,s._)("div",Xt,[(0,s.wy)((0,s._)("input",{type:"checkbox",value:e,"onUpdate:modelValue":t[10]||(t[10]=e=>o.selectedNfts=e),onClick:t=>l.selectNft(e)},null,8,Zt),[[a.e8,o.selectedNfts]]),Qt,(0,s._)("label",null,[(0,s._)("h5",null,"#"+(0,i.zw)(e),1)])]),(0,s._)("div",Kt,[(0,s._)("img",{src:n.pictureLink+e+".png",class:"img-fluid rounded mb-3",alt:"",onClick:t=>l.selectNft(e)},null,8,$t)]),(0,s._)("h6",null,[Jt,(0,s._)("span",Gt,"ðŸ†"+(0,i.zw)(o.nftInfo[e].level),1),en,(0,s._)("span",tn,"ðŸ”¥"+(0,i.zw)(o.powerForLevel[o.nftInfo[e].level]),1)]),o.nftInfo[e].level>=o.maxLevel?((0,s.wg)(),(0,s.iD)("h6",nn," Max. level reached! ")):((0,s.wg)(),(0,s.iD)("div",an,[(0,s._)("div",sn,[(0,s.wy)((0,s._)("input",{type:"range",title:"Choose desired level after upgrade",class:"form-control-range",min:o.nftInfo[e].level+1,max:o.maxLevel,id:"levelsToUpgradeSlider","onUpdate:modelValue":t=>o.nftInfo[e].nftLevelAfterUpgrade=t,onChange:t=>l.updateLevelsToUpgrade(e)},null,40,rn),[[a.nr,o.nftInfo[e].nftLevelAfterUpgrade]])]),(0,s._)("h6",on,[ln,o.nftInfo[e].nftLevelAfterUpgrade<=o.maxLevel?((0,s.wg)(),(0,s.iD)("span",dn," ðŸ†"+(0,i.zw)(o.nftInfo[e].nftLevelAfterUpgrade),1)):(0,s.kq)("",!0),(0,s._)("span",un," ðŸ”¥"+(0,i.zw)(o.powerForLevel[o.nftInfo[e].nftLevelAfterUpgrade]),1)])])),(0,s._)("div",cn,[o.nftInfo[e].staked?((0,s.wg)(),(0,s.iD)("button",{key:0,onClick:t=>l.unstake(e),class:"btn btn-danger",disabled:o.stakingPaused,style:{"font-size":"14px"}}," Unstake ",8,pn)):((0,s.wg)(),(0,s.iD)("button",{key:1,onClick:t=>l.stake(e),class:"btn btn-primary",disabled:o.stakingPaused,style:{"font-size":"14px"}}," Stake ",8,hn)),yn,o.stakersTokenAllowanceForLeveling<=0?((0,s.wg)(),(0,s.iD)("button",{key:2,class:"btn btn-primary",type:"button",id:"approveRewardToken",onClick:t[11]||(t[11]=(...e)=>l.approveRewardToken&&l.approveRewardToken(...e)),style:{"font-size":"14px"}}," approve SVC ")):((0,s.wg)(),(0,s.iD)("button",{key:3,onClick:t=>l.upgradeSpecificNft(e,o.nftInfo[e].levelsToUpgrade),class:"btn btn-primary",disabled:o.stakersTokenBalance<=0||o.nftInfo[e].level>=o.maxLevel||o.stakingPaused,style:{"font-size":"14px"}},[(0,s.Uk)(" Upgrade "+(0,i.zw)(o.nftInfo[e].levelsToUpgrade)+" level",1),1!=o.nftInfo[e].levelsToUpgrade?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[mn],64)):(0,s.kq)("",!0),(0,s.Uk)(" for "+(0,i.zw)(o.nftInfo[e].levelsToUpgrade*o.tokenCostPerLevel)+" SVC ",1)],8,fn))])])])])))),128))])])):(0,s.kq)("",!0)],64)}var kn=n(5554);function wn(e,t){let n=e.indexOf(t);return n>-1?e.splice(n,1):console.log("Unstaking an NFT that has not been staked before!"),e}var bn={name:"App",props:["nftCA","projectname","pictureLink"],emits:["updateStakingPowerEvent"],data(){return{expandFilter:!1,rpc:null,maxLevel:100,tokenCostPerLevel:100,tokenCostToBulkUpgrade:0,powerForLevel:[1e3,1050,1104,1162,1224,1291,1363,1440,1523,1613,1710,1815,1928,2051,2184,2329,2486,2657,2844,3048,3271,3515,3782,4075,4397,4730,5074,5428,5792,6165,6546,6934,7329,7730,8136,8546,8959,9375,9793,10212,10632,11051,11469,11886,12301,12713,13122,13527,13928,14324,14715,15101,15481,15855,16223,16584,16939,17287,17628,17962,18288,18607,18918,19222,19519,19808,20090,20364,20631,20891,21143,21391,21634,21873,22107,22336,22561,22781,22997,23210,23421,23630,23836,24040,24242,24441,24638,24833,25025,25215,25402,25587,25770,25950,26128,26304,26477,26648,26817,26983,27147],maxNftsPerTx:50,showLevelingExplanation:!1,stakersAddress:null,currentCollection:null,stakersTokenBalance:0,stakersTokenAllowanceForLeveling:0,feedbackMessage:"",nftContract:null,stakingContract:null,rewardTokenContract:null,provider:null,signer:null,loadingNfts:!0,stakersNfts:[],filteredNfts:[],filter:"all",selectedNfts:[],nftInfo:{},stakedCount:0,unstakedCount:0,nftLevel:{},transactionInProgress:!1,stakingPaused:!0}},methods:{selectNft:function(e){let t=this;t.selectedNfts.indexOf(e)<0?t.selectedNfts.push(e):wn(t.selectedNfts,e),t.updateCostForBulkUpgrade()},updateLevelsToUpgrade:function(e){let t=this;t.selectedNfts.indexOf(e)<0&&t.selectedNfts.push(e),t.nftInfo[e].nftLevelAfterUpgrade>t.maxLevel&&(t.nftInfo[e].nftLevelAfterUpgrade=t.maxLevel),t.nftInfo[e].levelsToUpgrade=t.nftInfo[e].nftLevelAfterUpgrade-t.nftInfo[e].level,t.updateCostForBulkUpgrade()},getInitialLevel:function(e){return e<10?10:2500==e?0:9-Math.floor(e/250)},getPower:function(e){return this.powerForLevel[this.nftInfo[e].level]},approveRewardToken:async function(){let e=this;e.feedbackMessage="Approving SVC token",e.transactionInProgress=!0;try{let t=await e.rewardTokenContract.approve(window.ReaperAddress,kn.Bz,{gasLimit:65e3,gasPrice:104674e4});await t.wait(),e.rewardTokenContract.allowance(e.stakersAddress,window.ReaperAddress).then((t=>{e.stakersTokenAllowanceForLeveling=t})),e.feedbackMessage="",e.transactionInProgress=!1}catch{e.transactionInProgress=!1,this.feedbackMessage="The transaction failed ðŸ˜¢"}},stake:async function(e){this.transactionInProgress=!0,this.feedbackMessage="Staking NFT";try{let t=await this.stakingContract.stake([e],{gasLimit:23e4,gasPrice:104674e4});await t.wait(),this.load(),this.transactionInProgress=!1,this.feedbackMessage=""}catch{this.transactionInProgress=!1,this.feedbackMessage="The transaction failed ðŸ˜¢"}},unstake:async function(e){this.transactionInProgress=!0,this.feedbackMessage="Unstaking NFT";try{let t=await this.stakingContract.unstake([e],{gasLimit:29e4,gasPrice:104674e4});await t.wait(),this.load(),this.transactionInProgress=!1,this.feedbackMessage=""}catch{this.transactionInProgress=!1,this.feedbackMessage="The transaction failed ðŸ˜¢"}},selectVisible:function(){this.feedbackMessage="",this.selectedNfts=[];for(let e of this.filteredNfts)this.selectedNfts.indexOf(e)<0&&this.selectedNfts.push(e);this.updateCostForBulkUpgrade()},clearSelection:function(){this.feedbackMessage="",this.selectedNfts=[],this.updateCostForBulkUpgrade()},stakeSelected:async function(){this.transactionInProgress=!0,this.feedbackMessage="Staking NFTs";let e=[];for(let t of this.selectedNfts)!1===this.nftInfo[t].staked&&this.filteredNfts.indexOf(t)>-1&&e.length<this.maxNftsPerTx&&e.push(t);if(this.selectedNfts=e.slice(),0===e.length)return this.feedbackMessage="No selected NFT matches all criteria.",!1;this.feedbackMessage="Staking selected NFTs.";try{let t=await this.stakingContract.stake(e,{gasLimit:Math.min(5e4+13e4*e.length,9999999),gasPrice:104674e4});await t.wait(),this.load(),this.transactionInProgress=!1,this.feedbackMessage=""}catch{this.transactionInProgress=!1,this.feedbackMessage="The transaction failed ðŸ˜¢"}},unstakeSelected:async function(){this.transactionInProgress=!0,this.feedbackMessage="Unstaking NFTs";let e=[];for(let t of this.selectedNfts)!0===this.nftInfo[t].staked&&this.filteredNfts.indexOf(t)>-1&&e.length<this.maxNftsPerTx&&e.push(t);if(this.selectedNfts=e.slice(),0===e.length)return this.feedbackMessage="No selected NFT matches all criteria.",!1;this.feedbackMessage="Unstaking selected NFTs.";try{let t=await this.stakingContract.unstake(e,{gasLimit:Math.min(125e3+2e5*e.length,9999999),gasPrice:104674e4});await t.wait(),this.load(),this.transactionInProgress=!1,this.feedbackMessage=""}catch{this.transactionInProgress=!1,this.feedbackMessage="The transaction failed ðŸ˜¢"}},updateCostForBulkUpgrade:function(){let e=0;this.tokenCostToBulkUpgrade=0;for(let t=0;t<this.selectedNfts.length;t++){let n=this.selectedNfts[t],a=this.nftInfo[n].levelsToUpgrade*this.tokenCostPerLevel;e>=this.maxNftsPerTx?(this.feedbackMessage="Max. number of NFTs selected",wn(this.selectedNfts,n),t--):(this.tokenCostToBulkUpgrade+=a,e++)}},upgradeSpecificNft:async function(e,t){if(this.transactionInProgress=!0,this.feedbackMessage="",0===t)return this.feedbackMessage="Can't upgrade 0 levels",!1;let n=this,a=t*n.tokenCostPerLevel;if(a>n.stakersTokenAllowanceForLeveling)return n.feedbackMessage="Please increase your SVC token allowance first",!1;if(a>n.stakersTokenBalance)return n.feedbackMessage="SVC token balance is too low",!1;let s=n.nftInfo[e].level;if(s>=n.maxLevel)return n.feedbackMessage="Cannot upgrade "+e+", because it's already at max. level",console.log(n.feedbackMessage),!1;let i=await n.nftContract.ownerOf(e);if(i!==n.stakersAddress&&i!==window.ReaperAddress)return n.feedbackMessage="Cannot upgrade "+e+", because it's not in your wallet",console.log(n.feedbackMessage),!1;n.feedbackMessage="Upgrading 1 NFT by "+t+" levels with "+a+" SVC",console.log(n.feedbackMessage),console.log("Power old= "+n.getPower(e)),console.log("Level old= "+s),console.log("Balance old= "+n.stakersTokenBalance);let r=n.stakersTokenBalance-a;console.log("Balance new= "+r);try{let a=await n.stakingContract.upgradeLevel([e],[t],{gasLimit:2e5,gasPrice:104674e4});await a.wait(),n.nftInfo[e].staked?window.location.reload():n.load(),this.transactionInProgress=!1,this.feedbackMessage=""}catch{this.transactionInProgress=!1,this.feedbackMessage="The transaction failed ðŸ˜¢"}},upgradeSelectedNfts:async function(){this.feedbackMessage="";let e=this;if(e.tokenCostToBulkUpgrade*10**18>e.stakersTokenAllowanceForLeveling)return e.feedbackMessage="Please increase your SVC token allowance first",!1;if(e.tokenCostToBulkUpgrade*10**18>e.stakersTokenBalance)return e.feedbackMessage="SVC token balance is too low",!1;if(e.selectedNfts.length<1)return e.feedbackMessage="No NFTs selected",!1;if(1==e.selectedNfts.length){let t=e.selectedNfts[0],n=e.nftInfo[t].level;if(n>=e.maxLevel)return e.feedbackMessage="Cannot upgrade "+t+", because it's already at max. level",console.log(e.feedbackMessage),!1;let a=await this.nftContract.ownerOf(t);if(a!==e.stakersAddress&&a!==window.ReaperAddress)return e.feedbackMessage="You don't own "+t,console.log(e.feedbackMessage),!1;e.feedbackMessage="Upgrading 1 NFT by "+e.nftInfo[t].levelsToUpgrade+" levels",console.log(e.feedbackMessage),console.log("Level old= "+n),console.log("Balance old= "+e.stakersTokenBalance);let s=e.stakersTokenBalance-e.nftInfo[t].levelsToUpgrade;console.log("Balance new= "+s),this.transactionInProgress=!0;try{let n=await e.stakingContract.upgradeLevel([t],[e.nftInfo[t].levelsToUpgrade],{gasLimit:2e5,gasPrice:104674e4});await n.wait()}catch{this.transactionInProgress=!1,this.feedbackMessage="The transaction failed ðŸ˜¢"}e.nftInfo[t].staked?window.location.reload():e.load()}else if(e.selectedNfts.length>1){let t=[],n=[];e.feedbackMessage="Double checking selected NFTs";for(let s=0;s<e.selectedNfts.length&&t.length<e.maxNftsPerTx;s++){let a=e.selectedNfts[s];0!==e.nftInfo[a].levelsToUpgrade?e.nftInfo[a].level>=e.maxLevel?e.feedbackMessage+=" â€” Skipping "+a+" (already at max level)":(t.push(e.selectedNfts[s]),n.push(e.nftInfo[a].levelsToUpgrade),console.log("Adding "+a),console.log(t)):e.feedbackMessage+=" â€” Skipping "+a+" (0 SVC upgrade)"}e.feedbackMessage+=" â€” "+t.length+" NFTs passed all checks",console.log(t),console.log(n),console.log("Bulk Upgrade Cost= "+e.tokenCostToBulkUpgrade),console.log("Balance old="+e.stakersTokenBalance);let a=e.stakersTokenBalance-e.tokenCostToBulkUpgrade;if(console.log("Balance after bulk upgrade: ",a),t.length<=0)return!1;e.feedbackMessage+=" â€” Upgrading NFTs ["+t+"] by ["+n+"] levels",this.transactionInProgress=!0;try{let e=await this.stakingContract.upgradeLevel(t,n,{gasLimit:Math.min(3e4+135e3*t.length,9999999),gasPrice:104674e4});await e.wait()}catch{this.transactionInProgress=!1,this.feedbackMessage="The transaction failed ðŸ˜¢"}}e.load(),this.transactionInProgress=!1,this.feedbackMessage=""},filterNfts:function(e){let t=this,n=[],a=[];switch(t.expandFilter=!1,t.filter=e,e){case"all":n=t.stakersNfts.filter((e=>!0===t.nftInfo[e].staked)),a=t.stakersNfts.filter((e=>!1===t.nftInfo[e].staked)),t.filteredNfts=n.concat(a);break;case"staked":t.filteredNfts=t.stakersNfts.filter((e=>!0===t.nftInfo[e].staked));break;case"unstaked":t.filteredNfts=t.stakersNfts.filter((e=>!1===t.nftInfo[e].staked));break;default:t.feedbackMessage="Filter not implemented"}},getWalletOfOwner:async function(e){let t=this;const n=500;return new Promise(((a,s)=>{let i=0,r=0;console.log("slice=",e),t.nftContract.walletOfOwnerWithLevels(t.stakersAddress,n,e).then((e=>{console.log("tokensLevels=",e),i=e.length,2*Math.floor(e.length/2)+1!==e.length&&console.log("Critical error! tokenLevelsLength should always be an odd number! tokenLevelsLength=",i),r=e[e.length-1];for(let n=0;n<e.length-1;n+=2){let a=Number(e[n]),s=Number(e[n+1]),i=!1;s>t.maxLevel?(s-=1e3,i=!1,t.unstakedCount++):(i=!0,t.stakedCount++),0===s&&(s=t.getInitialLevel(a)),t.stakersNfts.push(a),t.nftInfo[a]={staked:i,level:s,nftLevelAfterUpgrade:s+1,levelsToUpgrade:1}}})).then((()=>{(e+1)*n<r?(console.log("tokenLevelsLength",i),t.getWalletOfOwner(e+1).then((()=>{a()}))):a()})).catch((()=>{s()}))}))},load:async function(){let e=this;e.loadingNfts=!0,e.filteredNfts=[],e.stakersNfts=[],e.stakedCount=0,e.unstakedCount=0,e.stakersAddress=await e.signer.getAddress(),e.stakingContract.isMintPausedStakingPaused().then((t=>{console.log(t),e.stakingPaused=t[1]})),e.rewardTokenContract.balanceOf(e.stakersAddress).then((t=>{e.stakersTokenBalance=t})),e.rewardTokenContract.allowance(e.stakersAddress,window.ReaperAddress).then((t=>{e.stakersTokenAllowanceForLeveling=t})),e.getWalletOfOwner(0).then((()=>{e.stakersNfts.sort((function(t,n){return e.nftInfo[n].level-e.nftInfo[t].level})),console.log("calling filter"),e.filterNfts(e.filter),e.transactionInProgress=!1,e.loadingNfts=!1}))}},mounted:function(){this.rpc=window.ethereum,this.provider=new x.Q(this.rpc,"any"),this.provider.send("eth_requestAccounts",[]).then((()=>{this.signer=this.provider.getSigner();let e=new le.CH(this.nftCA.toString(),ce.Mt,this.provider.getSigner());this.stakingContract=new le.CH(window.ReaperAddress,ce.Mt,this.provider.getSigner());let t=new le.CH(window.RewardTokenAddress,ue.Mt,this.provider.getSigner());this.nftContract=e,this.rewardTokenContract=t})).then((()=>{this.load()}))}};const vn=(0,C.Z)(bn,[["render",gn]]);var Tn=vn;const _n={key:0,class:"container text-start"},Mn={class:"row"},xn={class:"col-xxl-6 mx-auto"},Pn={class:"card"},Cn={class:"card-body"},Nn={class:"col-12 align-items-left"},Sn=(0,s._)("br",null,null,-1),An=(0,s._)("br",null,null,-1),In=(0,s._)("br",null,null,-1),Un=(0,s._)("br",null,null,-1),Fn={key:0},Rn={key:1},Bn=(0,s._)("br",null,null,-1),Ln=(0,s._)("br",null,null,-1),Dn={key:1,class:"settings-menu"},Hn={key:0},zn=(0,s._)("br",null,null,-1),En={class:"settings-menu"},On=["disabled"],Vn=(0,s.Uk)(" Â  "),Yn=(0,s._)("a",{target:"_blank",href:"https://app.mistswap.fi/swap?inputCurrency=BCH&outputCurrency=0xE7B1076d0853a7aAa6FbB477886726ed03C6Fffd",class:"btn btn-primary"}," Trade SVC at MistSwap ",-1);function Wn(e,t,n,a,r,o){return null!==r.stakersAddress?((0,s.wg)(),(0,s.iD)("div",_n,[(0,s._)("div",Mn,[(0,s._)("div",xn,[(0,s._)("div",Pn,[(0,s._)("div",Cn,[(0,s._)("div",Nn,[(0,s._)("h4",null,[(0,s.Uk)((0,i.zw)(n.projectname)+" NFTs â€” Staking and Leveling Â  ",1),(0,s._)("i",{title:"Reload numbers",onClick:t[0]||(t[0]=(...e)=>o.reload&&o.reload(...e)),class:"ri-refresh-fill"})]),(0,s._)("h5",null,"Balance: "+(0,i.zw)(r.stakersRewardTokenBalance)+" SVC",1),Sn,(0,s._)("h5",{onUpdateStakingPowerEvent:t[1]||(t[1]=(...e)=>o.loadStakerInfo&&o.loadStakerInfo(...e))}," Staking power: "+(0,i.zw)(r.stakersPower)+"ðŸ”¥ ",33),An,r.stakersPower>0?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[(0,s._)("h5",null," Staked for "+(0,i.zw)(o.formatSeconds(r.stakerStakedForSeconds))+". (Harvest and unstake reset the timer.) ",1),In,(0,s._)("h5",null,"Current payout level: "+(0,i.zw)(r.stakersPayoutPct)+"%",1),Un,r.stakerNextPayoutPctInSeconds>0?((0,s.wg)(),(0,s.iD)("h5",Fn," Next payout level: "+(0,i.zw)(r.stakersNextPayoutPct)+"% â€” reached in "+(0,i.zw)(o.formatSeconds(r.stakerNextPayoutPctInSeconds)),1)):((0,s.wg)(),(0,s.iD)("h5",Rn," Congratulations! You reached the highest payout level. "))],64)):(0,s.kq)("",!0),Bn,(0,s._)("h6",null,"Total staked power: "+(0,i.zw)(r.totalStakedPower)+"ðŸ”¥",1),(0,s._)("h6",null," Total SVC Emission: ~"+(0,i.zw)(Math.round(r.womEmissionPerHour*r.earningsTime*100)/100)+" SVC / "+(0,i.zw)(r.hoursInWords[r.earningsTime]),1),Ln,r.womEmissionPerHour&&r.totalStakedPower&&r.stakersPower?((0,s.wg)(),(0,s.iD)("div",Dn,[(0,s._)("button",{class:"btn btn-primary",onClick:t[2]||(t[2]=e=>r.expandEarnings=!r.expandEarnings)}," Earning ~"+(0,i.zw)(Math.round(r.stakerEarningRateX1k*r.earningsTime)/1e3)+" SVC / "+(0,i.zw)(r.hoursInWords[r.earningsTime])+" (@100%) ",1),r.expandEarnings?((0,s.wg)(),(0,s.iD)("ul",Hn,[(0,s._)("li",null,[(0,s._)("span",{class:(0,i.C_)(["dropdown-item",1===r.earningsTime?"current":""]),onClick:t[3]||(t[3]=e=>{r.earningsTime=1,r.expandEarnings=!1})}," Earning ~"+(0,i.zw)(Math.round(1*r.stakerEarningRateX1k)/1e3)+" SVC / hour (@100%) ",3)]),(0,s._)("li",null,[(0,s._)("span",{class:(0,i.C_)(["dropdown-item",24===r.earningsTime?"current":""]),onClick:t[4]||(t[4]=e=>{r.earningsTime=24,r.expandEarnings=!1})}," Earning ~"+(0,i.zw)(Math.round(24*r.stakerEarningRateX1k)/1e3)+" SVC / day (@100%) ",3)]),(0,s._)("li",null,[(0,s._)("span",{class:(0,i.C_)(["dropdown-item",168===r.earningsTime?"current":""]),onClick:t[5]||(t[5]=e=>{r.earningsTime=168,r.expandEarnings=!1})}," Earning ~"+(0,i.zw)(Math.round(168*r.stakerEarningRateX1k)/1e3)+" SVC / week (@100%) ",3)]),(0,s._)("li",null,[(0,s._)("span",{class:(0,i.C_)(["dropdown-item",720===r.earningsTime?"current":""]),onClick:t[6]||(t[6]=e=>{r.earningsTime=720,r.expandEarnings=!1})}," Earning ~"+(0,i.zw)(Math.round(720*r.stakerEarningRateX1k)/1e3)+" SVC / month (@100%) ",3)]),(0,s._)("li",null,[(0,s._)("span",{class:(0,i.C_)(["dropdown-item",8760===r.earningsTime?"current":""]),onClick:t[7]||(t[7]=e=>{r.earningsTime=8760,r.expandEarnings=!1})}," Earning ~"+(0,i.zw)(Math.round(8760*r.stakerEarningRateX1k)/1e3)+" SVC / year (@100%) ",3)])])):(0,s.kq)("",!0)])):(0,s.kq)("",!0),zn,(0,s._)("div",En,[(0,s._)("button",{class:"btn btn-primary",onClick:t[8]||(t[8]=(...e)=>o.harvest&&o.harvest(...e)),disabled:r.stakingPaused||0==r.womToHarvest}," Harvest "+(0,i.zw)(Math.round(r.stakersPayoutPct*r.womToHarvest*10)/1e3)+" SVC ",9,On),Vn,Yn])])])])])])])):(0,s.kq)("",!0)}var qn={name:"App",props:["projectname"],data(){return{expandEarnings:!1,rewardTokenContract:null,nftContract:null,stakingContract:null,provider:null,signer:null,womEmissionPerHour:null,stakersAddress:null,stakerStakedForSeconds:null,SECONDS_PER_DAY:86400,stakersPayoutPct:null,stakersNextPayoutPct:null,stakerNextPayoutPctInSeconds:null,stakersPower:null,totalStakedPower:null,baseStakingPower:null,stakerEarningRateX1k:null,earningsTime:168,hoursInWords:{1:"hour",24:"day",168:"week",720:"month",8760:"year"},womToHarvest:null,stakingPaused:!0,stakersRewardTokenBalance:0}},methods:{harvest:async function(){let e=await this.stakingContract.harvest();await e.wait(),this.load()},approve:async function(){let e=await this.nftContract.setApprovalForAll(window.ReaperAddress,!0);await e.wait(),window.location.reload()},loadStakerInfo:function(){this.stakingContract.showStakerInfo(this.stakersAddress).then((e=>{let t=e[0];if(this.stakerStakedForSeconds=t,t>30*this.SECONDS_PER_DAY)this.stakersPayoutPct=115,this.stakersNextPayoutPct=115,this.stakerNextPayoutPctInSeconds=0;else if(t<19*this.SECONDS_PER_DAY){let e=Math.floor(t/this.SECONDS_PER_DAY);this.stakersPayoutPct=5*(e+1),this.stakersNextPayoutPct=this.stakersPayoutPct+5,this.stakerNextPayoutPctInSeconds=(e+1)*this.SECONDS_PER_DAY-t}else this.stakersPayoutPct=100,this.stakersNextPayoutPct=115,this.stakerNextPayoutPctInSeconds=30*this.SECONDS_PER_DAY-t;this.stakersPower=e[1],this.totalStakedPower=e[2],this.baseStakingPower=e[3],this.womEmissionPerHour=Math.round(1e5*de.dF(e[4]))/1e5,this.stakerEarningRateX1k=this.womEmissionPerHour*this.stakersPower/(this.totalStakedPower-this.baseStakingPower)*1e3})),this.womToHarvest=0,this.stakingContract.showStakersEarningsUntilLastTimestamp(this.stakersAddress).then((e=>{this.womToHarvest+=Math.round(1e5*de.dF(e))/1e5})),this.stakingContract.showStakersEarningsAfterLastTimestamp(this.stakersAddress).then((e=>{this.womToHarvest+=Math.round(1e5*de.dF(e))/1e5})),this.stakingContract.isMintPausedStakingPaused().then((e=>{this.stakingPaused=e[1]}))},formatSeconds:function(e){e=Number(e);var t=Math.floor(e/86400),n=Math.floor(e%86400/3600),a=Math.floor(e%3600/60),s=Math.floor(e%60),i=t>0?t+" d, ":"",r=n>0?n+" h, ":"",o=a>0?a+" min, ":"",l=s>0?s+" sec":"";return i+r+o+l},loadRewardTokenBalance:function(){console.log(this.stakersAddress),this.rewardTokenContract.balanceOf(this.stakersAddress).then((e=>{this.stakersRewardTokenBalance=Math.round(1e5*de.dF(e))/1e5}))},reload:function(){this.loadRewardTokenBalance(),this.loadStakerInfo()},load:function(){this.signer.getAddress().then((e=>{console.log(this.stakersAddress),this.stakersAddress=e,console.log(this.stakersAddress),this.loadStakerInfo(),this.loadRewardTokenBalance()}))}},mounted:function(){this.provider=new x.Q(window.ethereum,"any"),this.provider.send("eth_requestAccounts",[]).then((()=>{this.signer=this.provider.getSigner(),this.rewardTokenContract=new le.CH(window.RewardTokenAddress,ue.Mt,this.provider.getSigner()),this.stakingContract=new le.CH(window.ReaperAddress,ce.Mt,this.provider.getSigner())})).then((()=>{this.load()}))}};const jn=(0,C.Z)(qn,[["render",Wn]]);var Xn=jn,Zn={name:"App",components:{Nft:Tn,NftTop:Xn},data(){return{nftContract:window.ReaperAddress}}};const Qn=(0,C.Z)(Zn,[["render",ct]]);var Kn=Qn;const $n={class:"content-body"};function Jn(e,t,n,a,i,r){const o=(0,s.up)("AllNfts");return(0,s.wg)(),(0,s.iD)("div",$n,[(0,s.Wm)(o,{pictureLink:i.pictureLink,projectname:"Reaperville"},null,8,["pictureLink"])])}const Gn=(0,s.uE)('<div class="col-12"><div class="card"><div class="card-body"><div class="row"><div class="col-xxl-10 col-xl-10 col-lg-10 col-md-10 col-sm-12 mx-auto"><div class="card-body"><h2> Explore the colorful Reaperville NFT collection on SmartBch! </h2><h4> Which one is your favorite? Let us know in the <a href="https://t.me/reaperville" target="_blank">official Reaperville Telegram group</a>. </h4></div></div></div></div></div></div>',1),ea={class:"col-12"},ta={class:"card filter-tab"},na={class:"card-body bs-0 p-0 bg-transparent"},aa={class:"row"},sa={class:"col-xxl-10 col-xl-10 col-lg-10 col-md-10 col-sm-12 mx-auto"},ia={class:"card-body"},ra=(0,s.Uk)(" Â  "),oa=(0,s.Uk)(" Â  "),la={key:0,class:"mt-3"},da=["onClick"],ua={key:1,class:"mt-3"},ca=(0,s._)("br",null,null,-1),pa={class:"row"},ha={class:"card items"},ya={class:"card-body"},fa={class:"items-img position-relative"},ma=["src"],ga={class:"card-title"};function ka(e,t,n,a,r,o){return(0,s.wg)(),(0,s.iD)(s.HY,null,[Gn,(0,s._)("div",ea,[(0,s._)("div",ta,[(0,s._)("div",na,[(0,s._)("div",aa,[(0,s._)("div",sa,[(0,s._)("div",ia,[(0,s._)("button",{class:"btn btn-primary",type:"button",onClick:t[0]||(t[0]=e=>r.expandRange=!r.expandRange)}," Showing "+(0,i.zw)(r.startIdx)+" - "+(0,i.zw)(r.startIdx+r.maxNftsPerPage-1),1),ra,(0,s._)("button",{class:"btn btn-primary",type:"button",onClick:t[1]||(t[1]=e=>r.expandMaxNftsPerPage=!r.expandMaxNftsPerPage)}," Max. "+(0,i.zw)(r.maxNftsPerPage)+" NFTs ",1),oa,(0,s._)("button",{class:"btn btn-primary",type:"button",onClick:t[2]||(t[2]=e=>r.imgResolutionIdx=(r.imgResolutionIdx+1)%2)}," Resolution: "+(0,i.zw)(0===r.imgResolutionIdx?"Low":"High"),1),r.expandRange?((0,s.wg)(),(0,s.iD)("ul",la,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(Math.ceil(2500/r.maxNftsPerPage),(e=>((0,s.wg)(),(0,s.iD)("li",{key:e},[(0,s._)("a",{class:(0,i.C_)(["dropdown-item",r.startIdx===(e-1)*r.maxNftsPerPage?"current":""]),href:"#",onClick:t=>o.load((e-1)*r.maxNftsPerPage+1,r.maxNftsPerPage)}," Show "+(0,i.zw)((e-1)*r.maxNftsPerPage+1)+" - "+(0,i.zw)(Math.min(e*r.maxNftsPerPage,2500)),11,da)])))),128))])):(0,s.kq)("",!0),r.expandMaxNftsPerPage?((0,s.wg)(),(0,s.iD)("ul",ua,[(0,s._)("li",null,[(0,s._)("a",{class:(0,i.C_)(["dropdown-item",10===r.maxNftsPerPage?"current":""]),href:"#",onClick:t[3]||(t[3]=e=>o.load(r.startIdx,10))},"Max. 10",2),(0,s._)("a",{class:(0,i.C_)(["dropdown-item",25===r.maxNftsPerPage?"current":""]),href:"#",onClick:t[4]||(t[4]=e=>o.load(r.startIdx,25))},"Max. 25",2),(0,s._)("a",{class:(0,i.C_)(["dropdown-item",50===r.maxNftsPerPage?"current":""]),href:"#",onClick:t[5]||(t[5]=e=>o.load(r.startIdx,50))},"Max. 50",2)]),(0,s._)("li",null,[(0,s._)("a",{class:(0,i.C_)(["dropdown-item",75===r.maxNftsPerPage?"current":""]),href:"#",onClick:t[6]||(t[6]=e=>o.load(r.startIdx,75))},"Max. 75",2)]),(0,s._)("li",null,[(0,s._)("a",{class:(0,i.C_)(["dropdown-item",125===r.maxNftsPerPage?"current":""]),href:"#",onClick:t[7]||(t[7]=e=>o.load(r.startIdx,125))},"Max. 125",2)])])):(0,s.kq)("",!0)])])]),ca,(0,s._)("div",pa,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.filteredNfts,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"col-xxl-3 col-xl-4 col-lg-4 col-md-6 col-sm-6",key:e},[(0,s._)("div",ha,[(0,s._)("div",ya,[(0,s._)("div",fa,[(0,s._)("img",{src:n.pictureLink[r.imgResolutionIdx]+e+".png",class:"img-fluid rounded mb-3",alt:""},null,8,ma)]),(0,s._)("label",null,[(0,s._)("h4",ga," #"+(0,i.zw)(e)+" Â  ",1)])])])])))),128))])])])])],64)}var wa={name:"App",props:["pictureLink","projectname"],emits:["updateStakingPowerEvent"],data(){return{expandRange:!1,expandMaxNftsPerPage:!1,maxLevel:100,powerForLevel:[1e3,1050,1104,1162,1224,1291,1363,1440,1523,1613,1710,1815,1928,2051,2184,2329,2486,2657,2844,3048,3271,3515,3782,4075,4397,4730,5074,5428,5792,6165,6546,6934,7329,7730,8136,8546,8959,9375,9793,10212,10632,11051,11469,11886,12301,12713,13122,13527,13928,14324,14715,15101,15481,15855,16223,16584,16939,17287,17628,17962,18288,18607,18918,19222,19519,19808,20090,20364,20631,20891,21143,21391,21634,21873,22107,22336,22561,22781,22997,23210,23421,23630,23836,24040,24242,24441,24638,24833,25025,25215,25402,25587,25770,25950,26128,26304,26477,26648,26817,26983,27147],filteredNfts:[],maxNftsPerPage:25,startIdx:1,imgResolutionIdx:0}},methods:{getInitialLevel:function(e){return e<10?10:2500==e?0:9-Math.floor(e/250)},getPower:function(e){return this.powerForLevel[this.nftInfo[e].level]},load:async function(e,t){let n=this;n.expandRange=!1,n.expandMaxNftsPerPage=!1,e<1&&(e=1),this.maxNftsPerPage=t,this.startIdx=e,n.filteredNfts=[];for(let a=e;a<Math.min(e+t,2500);a++)n.filteredNfts.push(a);console.log("calling filter")}},mounted:function(){this.load(1,this.maxNftsPerPage)}};const ba=(0,C.Z)(wa,[["render",ka]]);var va=ba,Ta={name:"App",components:{AllNfts:va},data(){return{pictureLink:["https://raw.githubusercontent.com/Surviville/Reaperville/master/png-low-res/","https://raw.githubusercontent.com/Surviville/Reaperville/master/png/"]}}};const _a=(0,C.Z)(Ta,[["render",Jn]]);var Ma=_a;const xa={class:"content-body"},Pa={class:"container text-start"},Ca={class:"col-xxl-12"},Na=(0,s._)("div",{class:"card"},[(0,s._)("div",{class:"card-body"},[(0,s._)("h4",null,"Notice"),(0,s._)("h6",null," Click the envelope icons to show or hide the sections on this page. ")])],-1),Sa={class:"card"},Aa={class:"card-body"},Ia={key:0},Ua=(0,s.Uk)(" How Staking Your Reaperville NFTs Works Â  "),Fa=(0,s.Uk)(" How Staking Your Reaperville NFTs Works Â  "),Ra=(0,s._)("ul",null,[(0,s._)("li",null," Normally, when you stake one or multiple NFTs, you transfer the ownership of your NFTs to a smart contract which promises to transfer them back to you when you want to unstake your NFTs. "),(0,s._)("h6",{class:"mt-3"},"We at Surviville do things differently!"),(0,s._)("li",null," When you stake a Reaperville NFT, the NFT remains in your wallet. That means, you don't have to transfer your NFTs to a different contract to stake them. "),(0,s._)("li",null," However, when you decide to transfer a staked NFT to another wallet or an NFT marketplace, you need to unstake them first on this website in order to harvest your staking rewards. "),(0,s._)("li",null," If you try to transfer a staked NFT without unstaking it first, the NFT is automatically unstaked for you, but you will not receive the staking rewards for this particular NFT since your last automatic or manual harvest. "),(0,s._)("li",null," However, transferring staked NFTs also don't reset the penalties and reward cycle â€” which can be an advantage. "),(0,s._)("li",null," However, transferring staked NFTs also don't reset the penalties and reward cycle. ")],-1),Ba=(0,s._)("br",null,null,-1),La={key:2},Da=(0,s.Uk)(" How Many NFTs can you stake? Â  "),Ha=(0,s.Uk)(" How Many NFTs can you stake? Â  "),za=(0,s._)("h6",null,"As many as you want!",-1),Ea=(0,s._)("ul",null,[(0,s._)("li",null,"There is no limitation per wallet.")],-1),Oa=(0,s._)("br",null,null,-1),Va={key:4},Ya=(0,s.Uk)(" Advantages and Disadvantages Â  "),Wa=(0,s.Uk)(" Advantages and Disadvantages Â  "),qa=(0,s._)("h6",null,"Advantages",-1),ja=(0,s._)("ul",null,[(0,s._)("li",null,"Super low gas fees for staking and unstaking your NFTs."),(0,s._)("li",null," The staked NFTs remain in your wallet. No need to trust a smart contract with the custody of your NFTs. ")],-1),Xa=(0,s._)("br",null,null,-1),Za=(0,s._)("h6",null,"Disadvantages",-1),Qa=(0,s._)("ul",null,[(0,s._)("li",null," You need to remember to unstake the NFTs which you want to transfer to another wallet or which you want to sell on Oasis. "),(0,s._)("li",null," If you forget to unstake the NFTs before transferring them, you will lose the harvest of these NFTs since your last automatic or manual harvest, but the penalties and bonus cycle will not be restarted. ")],-1),Ka={class:"col-xxl-12"},$a={class:"card top-bid"},Ja={class:"card-body"},Ga={class:"row align-items-center"},es={class:"col align-items-center"},ts={key:0},ns=(0,s.Uk)(" NFT Level Upgrades Â  "),as=(0,s.Uk)(" NFT Level Upgrades Â  "),ss=(0,s._)("ul",null,[(0,s._)("li",null," You can permanently increase the staking power of your NFTs by upgrading the levels of any NFT you own. "),(0,s._)("li",null," For level upgrades you need SVC tokens which you can earn by staking your NFTs or by buying them on MistSwap. "),(0,s._)("li",null,[(0,s.Uk)(" Each level upgrade costs "),(0,s._)("strong",null,"100 SVC tokens. ")]),(0,s._)("li",null,[(0,s.Uk)("The maximum level is "),(0,s._)("strong",null,"100. ")]),(0,s._)("li",null,[(0,s.Uk)(" Use the slider on the "),(0,s._)("a",{href:"/my-reapers"},"staking and leveling website"),(0,s.Uk)(" to select the level you want to upgrade to. The website shows you a preview of the power after the upgrade. ")])],-1),is={class:"col-xxl-12"},rs={class:"card top-bid"},os={class:"card-body"},ls={class:"row align-items-center"},ds={class:"col align-items-center"},us={key:0},cs=(0,s.Uk)(" Harvest Types Â  "),ps=(0,s.Uk)(" Harvest Types Â  "),hs=(0,s.uE)("<ul><li> Whenever you stake, unstake or upgrade one or multiple NFTs, a harvest of SVC reward tokens is automatically executed. </li><li> Additionally, you can harvest SVC reward tokens whenever you want. This operation is called a <strong>manual harvest</strong>. </li></ul><br><h4>Harvest Penalties and Bonuses</h4><h6>Penalties</h6><ul><li> If you harvest within the first 20 days of your first stake or your last manual harvest, the harvest amount is reduced by a penalty. </li><li> The penalty applies to both automatic and manual harvests. </li><li> Within the first day of staking, the penalty is 95% of the harvest amount. </li><li> For each subsequent full day of staking, the penalty is reduced by 5 percentage points. </li><li> That means, you will receive 10% after a full day of staking, 15% after 2 full days, 20% after 3 full days and so on. </li><li> After 19 full days of staking your NFTs, you will receive 100% of the harvest amount. That means after 20 days there are no penalties on harvests. </li></ul><br><h6>Bonus</h6><ul><li> But wait, that&#39;s not all: After 30 full days of staking, you will receive a 15% bonus. ðŸ‘€ </li><li> Note that each pure harvest and each unstake will reset the penalties and bonuses cycle. A stake or level upgrade will <strong>not</strong> reset the cycle. An automatic unstake due to an NFT transfer will also not reset the cycle. </li></ul>",8);function ys(e,t,n,a,i,r){return(0,s.wg)(),(0,s.iD)("div",xa,[(0,s._)("div",Pa,[(0,s._)("div",Ca,[Na,(0,s._)("div",Sa,[(0,s._)("div",Aa,[i.showStaking?((0,s.wg)(),(0,s.iD)(s.HY,{key:1},[(0,s._)("h4",null,[Fa,(0,s._)("i",{onClick:t[1]||(t[1]=e=>i.showStaking=!i.showStaking),title:"Hide text",class:"ri-mail-open-line"})]),Ra],64)):((0,s.wg)(),(0,s.iD)("h4",Ia,[Ua,(0,s._)("i",{onClick:t[0]||(t[0]=e=>i.showStaking=!i.showStaking),title:"Show text",class:"ri-mail-line"})])),Ba,i.showHowMany?((0,s.wg)(),(0,s.iD)(s.HY,{key:3},[(0,s._)("h4",null,[Ha,(0,s._)("i",{onClick:t[3]||(t[3]=e=>i.showHowMany=!i.showHowMany),title:"Hide text",class:"ri-mail-open-line"})]),za,Ea],64)):((0,s.wg)(),(0,s.iD)("h4",La,[Da,(0,s._)("i",{onClick:t[2]||(t[2]=e=>i.showHowMany=!i.showHowMany),title:"Show text",class:"ri-mail-line"})])),Oa,i.showAdvantages?((0,s.wg)(),(0,s.iD)(s.HY,{key:5},[(0,s._)("h4",null,[Wa,(0,s._)("i",{onClick:t[5]||(t[5]=e=>i.showAdvantages=!i.showAdvantages),title:"Hide text",class:"ri-mail-open-line"})]),qa,ja,Xa,Za,Qa],64)):((0,s.wg)(),(0,s.iD)("h4",Va,[Ya,(0,s._)("i",{onClick:t[4]||(t[4]=e=>i.showAdvantages=!i.showAdvantages),title:"Show text",class:"ri-mail-line"})]))])]),(0,s._)("div",Ka,[(0,s._)("div",$a,[(0,s._)("div",Ja,[(0,s._)("div",Ga,[(0,s._)("div",es,[i.showUpgrades?((0,s.wg)(),(0,s.iD)(s.HY,{key:1},[(0,s._)("h4",null,[as,(0,s._)("i",{onClick:t[7]||(t[7]=e=>i.showUpgrades=!i.showUpgrades),title:"Show text",class:"ri-mail-open-line"})]),ss],64)):((0,s.wg)(),(0,s.iD)("h4",ts,[ns,(0,s._)("i",{onClick:t[6]||(t[6]=e=>i.showUpgrades=!i.showUpgrades),title:"Show text",class:"ri-mail-line"})]))])])])])]),(0,s._)("div",is,[(0,s._)("div",rs,[(0,s._)("div",os,[(0,s._)("div",ls,[(0,s._)("div",ds,[i.showHarvest?((0,s.wg)(),(0,s.iD)(s.HY,{key:1},[(0,s._)("h4",null,[ps,(0,s._)("i",{onClick:t[9]||(t[9]=e=>i.showHarvest=!i.showHarvest),class:"ri-mail-open-line"})]),hs],64)):((0,s.wg)(),(0,s.iD)("h4",us,[cs,(0,s._)("i",{onClick:t[8]||(t[8]=e=>i.showHarvest=!i.showHarvest),class:"ri-mail-line"})]))])])])])])])])])}var fs={data(){return{showStaking:!1,showAdvantages:!1,showHowMany:!1,showUpgrades:!1,showHarvest:!1}}};const ms=(0,C.Z)(fs,[["render",ys]]);var gs=ms;let ks=(0,a.ri)(S);const ws=[{path:"/my-reapers",component:Kn},{path:"/all-reapers",component:Ma},{path:"/admin",component:ye},{path:"/nftMint",component:lt},{path:"/info",component:gs},{path:"/",component:lt}],bs=(0,dt.p7)({history:(0,dt.PO)(),routes:ws});ks.use(bs),ks.mount("#app")},8677:function(){},2808:function(){}},t={};function n(a){var s=t[a];if(void 0!==s)return s.exports;var i=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=e,function(){n.amdO={}}(),function(){var e=[];n.O=function(t,a,s,i){if(!a){var r=1/0;for(u=0;u<e.length;u++){a=e[u][0],s=e[u][1],i=e[u][2];for(var o=!0,l=0;l<a.length;l++)(!1&i||r>=i)&&Object.keys(n.O).every((function(e){return n.O[e](a[l])}))?a.splice(l--,1):(o=!1,i<r&&(r=i));if(o){e.splice(u--,1);var d=s();void 0!==d&&(t=d)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[a,s,i]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var s,i,r=a[0],o=a[1],l=a[2],d=0;if(r.some((function(t){return 0!==e[t]}))){for(s in o)n.o(o,s)&&(n.m[s]=o[s]);if(l)var u=l(n)}for(t&&t(a);d<r.length;d++)i=r[d],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(u)},a=self["webpackChunksurviville_staking"]=self["webpackChunksurviville_staking"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(4600)}));a=n.O(a)})();
//# sourceMappingURL=app.c238929e.js.map